<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <title>登录界面</title>
    <link href="login/css/default.css" rel="stylesheet" type="text/css" />
    <!--必要样式-->
    <link href="login/css/styles.css" rel="stylesheet" type="text/css" />
    <link href="login/css/demo.css" rel="stylesheet" type="text/css" />
    <link href="login/css/loaders.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="js/cookie.js"></script>
    <style>
        #successImg {
            width: 58px;
            height: 58px;
            margin: 0px auto;
            background: url("img/success.png") no-repeat;
            background-size: 58px;
            border: none;
        }
        
        #failImg {
            width: 58px;
            height: 58px;
            margin: 0px auto;
            background: url("img/fail.png") no-repeat;
            background-size: 58px;
            border: none;
        }
    </style>

</head>

<body>
    <div class='login'>
        <div class='login_title'>
            <span>管理员登录</span>
        </div>
        <div class='login_fields'>
            <div class='login_fields__user'>
                <div class='icon'>
                    <img alt="" src='login/img/user_icon_copy.png'>
                </div>
                <input name="adminId" placeholder='用户名' maxlength="16" type='text' autocomplete="off" />
                <div class='validation'>
                    <img alt="" src='login/img/tick.png'>
                </div>
            </div>
            <div class='login_fields__password'>
                <div class='icon'>
                    <img alt="" src='login/img/lock_icon_copy.png'>
                </div>
                <input name="pwd" placeholder='密码' maxlength="16" type='password' autocomplete="off">
                <div class='validation'>
                    <img alt="" src='login/img/tick.png'>
                </div>
            </div>
            <div class='login_fields__submit'>
                <input type='button' value='登录'>
            </div>
        </div>
        <div class='success'>
        </div>
        <div class='disclaimer'>
            <p>欢迎登陆园猿网后台管理系统</p>
        </div>
    </div>
    <div class='authent'>
        <div class="loader" style="height: 44px;width: 44px;margin-left: 28px;">
            <div class="loader-inner ball-clip-rotate-multiple">
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
        <p>认证中...</p>
    </div>
    <div class="OverWindows"></div>

    <link href="login/layui/css/layui.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="login/js/jquery.min.js"></script>
    <script type="text/javascript" src="login/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src='login/js/stopExecutionOnTimeout.js?t=1'></script>
    <script type="text/javascript" src="login/layui/layui.js"></script>
    <script type="text/javascript" src="login/js/Particleground.js"></script>
    <!-- <script type="text/javascript" src="login/js/Treatment.js"></script> -->
    <script type="text/javascript" src="login/js/jquery.mockjax.js"></script>
    <script type="text/javascript">
        var canGetCookie = 0; //是否支持存储Cookie 0 不支持 1 支持
        var ajaxmockjax = 1; //是否启用虚拟Ajax的请求响 0 不启用  1 启用
        $(document).keypress(function(e) {
            // 回车键事件  
            if (e.which == 13) {
                $('input[type="button"]').click();
            }
        });
        var open = 0;
        layui.use('layer', function() {
            //非空验证
            $('input[type="button"]').click(function() {
                var adminId = $('input[name="adminId"]').val();
                var pwd = $('input[name="pwd"]').val();
                if (adminId == '') {
                    alert('请输入您的账号');
                } else if (pwd == '') {
                    alert('请输入密码');
                } else {
                    $.ajax({
                        url: "/api/user/findAdmin/" + adminId,
                        method: "GET",
                        success: function(result) {
                            // console.log(result);
                            if (result.data.length == 0) {
                                jQuery.alertWindow("管理员【" + adminId + "】不存在", false);
                            } else if (pwd == result.data[0].password) {
                                jQuery.alertWindow("登录成功", true);
                                // 有限期 一天
                                setCookie("admin", JSON.stringify(result.data[0]), "s86400");
                                setTimeout(function() {
                                    window.location.href = "index.html";
                                }, 1000);
                            } else {
                                jQuery.alertWindow("密码不正确，请重新填写", false);
                            }
                        },
                        error: function(err) {
                            alert("账号必须为数字");
                        }
                    });
                }
            });
        });
        //  自定义提示框
        jQuery.extend({
            alertWindow: function(e, status) {
                var successStatus = '<div class="alertWindow1" style="width: 100%;height: 100%; background:rgba(0,0,0,0.5);position: fixed; left:0px; top: 0px; z-index: 9999;"><div style="width: 360px; height: 170px;background: #FFF;margin: 300px auto;border: 2px solid #CFCFCF;"><div style="width: inherit;height: 20px;"><div class="alertWindowCloseButton1" style="float: right; width: 10px; height: 30px;margin-right:5px;font-family:\'microsoft yahei\';cursor: pointer;"></div></div><div id="successImg" class="alertWindowTitle" style="margin-top:10px;text-align:center;font-family:\'Verdana, Geneva, Arial, Helvetica, sans-serif\';font-size: 18px;font-weight: normal;"></div><div class="alertWindowContent" style="width:360px;height: 40px;text-align:center;font-size: 18px;color: #7F7F7F;margin-top:10px;">' + e + '</div></div></div>';;
                var failStatus = '<div class="alertWindow1" style="width: 100%;height: 100%; background:rgba(0,0,0,0.5);position: fixed; left:0px; top: 0px; z-index: 9999;"><div style="width: 360px; height: 170px;background: #FFF;margin: 300px auto;border: 2px solid #CFCFCF;"><div style="width: inherit;height: 20px;"><div class="alertWindowCloseButton1" style="float: right; width: 10px; height: 30px;margin-right:5px;font-family:\'microsoft yahei\';cursor: pointer;"></div></div><div id="failImg" class="alertWindowTitle" style="margin-top:10px;text-align:center;font-family:\'Verdana, Geneva, Arial, Helvetica, sans-serif\';font-size: 18px;font-weight: normal;"></div><div class="alertWindowContent" style="width:360px;height: 40px;text-align:center;font-size: 18px;color: #7F7F7F;margin-top:10px;">' + e + '</div></div></div>';;
                var i = (status == true ? successStatus : failStatus);
                $("body").append(i);
                var s = $(".alertWindow1");
                //10秒后自动关闭窗口
                setTimeout(function() {
                    s.hide()
                }, 1000);
            }
        });
        //全屏
        var fullscreen = function() {
            elem = document.body;
            if (elem.webkitRequestFullScreen) {
                elem.webkitRequestFullScreen();
            } else if (elem.mozRequestFullScreen) {
                elem.mozRequestFullScreen();
            } else if (elem.requestFullScreen) {
                elem.requestFullscreen();
            } else {
                //浏览器不支持全屏API或已被禁用  
            }
        };
    </script>
    <script type="text/javascript" src="login/img/ThreeWebGL.js"></script>
    <script type="text/javascript" src="login/img/ThreeExtras.js"></script>
    <script type="text/javascript" src="login/img/Detector.js"></script>
    <script type="text/javascript" src="login/img/RequestAnimationFrame.js"></script>
    <script id="vs" type="x-shader/x-vertex">
        varying vec2 vUv; void main() { vUv = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 ); }
    </script>
    <script id="fs" type="x-shader/x-fragment">
        uniform sampler2D map; uniform vec3 fogColor; uniform float fogNear; uniform float fogFar; varying vec2 vUv; void main() { float depth = gl_FragCoord.z / gl_FragCoord.w; float fogFactor = smoothstep( fogNear, fogFar, depth ); gl_FragColor = texture2D(
        map, vUv ); gl_FragColor.w *= pow( gl_FragCoord.z, 20.0 ); gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor ); }
    </script>
    <script type="text/javascript">
        if (!Detector.webgl) Detector.addGetWebGLMessage();
        var canvas = document.createElement('canvas');
        canvas.width = 32;
        canvas.height = window.innerHeight;
        var context = canvas.getContext('2d');
        var gradient = context.createLinearGradient(0, 0, 0, canvas.height);
        gradient.addColorStop(0, "#1e4877");
        gradient.addColorStop(0.5, "#4584b4");
        context.fillStyle = gradient;
        context.fillRect(0, 0, canvas.width, canvas.height);
        document.body.style.background = 'url(' + canvas.toDataURL('image/png') + ')';
        var container;
        var camera, scene, renderer, sky, mesh, geometry, material, i, h, color, colors = [],
            sprite, size, x, y, z;
        var mouseX = 0,
            mouseY = 0;
        var start_time = new Date().getTime();
        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;
        init();
        animate();

        function init() {
            container = document.createElement('div');
            document.body.appendChild(container);
            camera = new THREE.Camera(30, window.innerWidth / window.innerHeight, 1, 3000);
            camera.position.z = 6000;
            scene = new THREE.Scene();
            geometry = new THREE.Geometry();
            var texture = THREE.ImageUtils.loadTexture('img/cloud.png');
            texture.magFilter = THREE.LinearMipMapLinearFilter;
            texture.minFilter = THREE.LinearMipMapLinearFilter;
            var fog = new THREE.Fog(0x4584b4, -100, 3000);
            material = new THREE.MeshShaderMaterial({
                uniforms: {
                    "map": {
                        type: "t",
                        value: 2,
                        texture: texture
                    },
                    "fogColor": {
                        type: "c",
                        value: fog.color
                    },
                    "fogNear": {
                        type: "f",
                        value: fog.near
                    },
                    "fogFar": {
                        type: "f",
                        value: fog.far
                    },
                },
                vertexShader: document.getElementById('vs').textContent,
                fragmentShader: document.getElementById('fs').textContent,
                depthTest: false
            });
            var plane = new THREE.Mesh(new THREE.Plane(64, 64));
            for (i = 0; i < 8000; i++) {
                plane.position.x = Math.random() * 1000 - 500;
                plane.position.y = -Math.random() * Math.random() * 200 - 15;
                plane.position.z = i;
                plane.rotation.z = Math.random() * Math.PI;
                plane.scale.x = plane.scale.y = Math.random() * Math.random() * 1.5 + 0.5;
                GeometryUtils.merge(geometry, plane)
            }
            mesh = new THREE.Mesh(geometry, material);
            scene.addObject(mesh);
            mesh = new THREE.Mesh(geometry, material);
            mesh.position.z = -8000;
            scene.addObject(mesh);
            renderer = new THREE.WebGLRenderer({
                antialias: false
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);
            document.addEventListener('mousemove', onDocumentMouseMove, false);
            window.addEventListener('resize', onWindowResize, false)
        }

        function onDocumentMouseMove(event) {
            mouseX = (event.clientX - windowHalfX) * 0.25;
            mouseY = (event.clientY - windowHalfY) * 0.15
        }

        function onWindowResize(event) {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight)
        }

        function animate() {
            requestAnimationFrame(animate);
            render()
        }

        function render() {
            position = ((new Date().getTime() - start_time) * 0.03) % 8000;
            camera.position.x += (mouseX - camera.target.position.x) * 0.01;
            camera.position.y += (-mouseY - camera.target.position.y) * 0.01;
            camera.position.z = -position + 8000;
            camera.target.position.x = camera.position.x;
            camera.target.position.y = camera.position.y;
            camera.target.position.z = camera.position.z - 1000;
            renderer.render(scene, camera)
        }
    </script>

</body>

</html>